<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
<meta name="TEMPLATEBASE" content="book-no-index" />
<meta name="LASTUPDATED" content="2006 연 8 월 11 일 금요일 14:53:49" />
<title>JMX API 의 기본 요소 - xrath.com 에서 번역됨</title>
	<link rel="StyleSheet" href="document.css" type="text/css" />
	<link rel="StyleSheet" href="catalog.css" type="text/css" />
    <link rel="Table of Contents" href="tutorialTOC.html" />
    <link rel="Previous" href="intro.html" />
    <link rel="Next" href="connectors.html" />
    <link rel="Index" href="security.html" />
  </head>

  <body>
<a href="#skip" title="네비게이션 링크를 스킵"></a> 
    <table width="100%" summary="layout">
      <tr><td align="left">
<a accesskey="c" href="tutorialTOC.html">목차</a>  | <a accesskey="p" href="intro.html">전의 항목</a>  | <a accesskey="n" href="connectors.html">다음의 항목</a> 
       </td>
	   <td align="right"><i>Java Management Extensions (JMX) 테크놀러지의 튜토리얼</i></td>
      </tr>
    </table>
<hr size="8" width="35%" align="left" noshade>
<a name="skip"></a>  <a name="wp1053091"> </a> <h2 class="pChapNum">
제 2 장
</h2>
<a name="wp1053098"> </a> <h2 class="pChapTitle">
JMX API 의 기본 요소
</h2>
<a name="wp1053099"> </a> <p class="pListEndingPara"></p>
</ol>
<a name="wp1053102"> </a> <p class="pBody">
이 예에서는, 관리 대상 Bean, 즉 <em class="cEmphasis">MBean</em> 등의, Java Management Extensions (JMX) API 의 기본적인 개념을 소개합니다.
</p>
<a name="wp1053104"> </a> <p class="pBody">
<em class="cEmphasis">MBean</em> 는 JavaBean<sup class="cSuperscript">TM</sup> 를 닮은 관리 대상 Java 객체이며, 그 설계 패턴은 JMX 스펙의 계측 레벨의 규정에 따릅니다. MBean 를 사용해, 디바이스, 어플리케이션, 또는 관리가 필요한 모든 자원을 나타낼 수가 있습니다. MBean 는 관리 인터페이스, 즉 read와 기입의 한편 또는 양쪽 모두가 가능한 속성 세트라고 호출해 가능한 조작 세트, 및 자기 기술을 개시하고 있습니다. 관리 인터페이스는, MBean 인스턴스의 생존 기간을 통해서 변화하지 않습니다. 또, MBean 는, 정의 끝난 특정의 이벤트가 일어났을 경우에 통지를 발행합니다.
</p>
<a name="wp1053105"> </a> <p class="pBody">
JMX 스펙에서는, 표준 <em class="cEmphasis">MBean</em>, 동적 <em class="cEmphasis">MBean</em>,<em class="cEmphasis">open MBean</em>, 및 <em class="cEmphasis">model MBean</em> 라고 하는 4 종류의 MBean 를 정의하고 있습니다. 이 장의 예에서는, 가장 단순한 MBean 인 표준 MBean 에 대해 설명합니다.  
</p>
<a name="wp1053106"> </a> <h2 class="pHeading1">
2.1	표준 MBean
</h2>
<a name="wp1053107"> </a> <p class="pBody">
표준 MBean 는, Java 인터페이스 <code class="cCode">SomethingMBean</code> 와 그 인터페이스를 구현하는 Java 클래스 <code class="cCode">Something</code> 를 기술하는 것으로 정의됩니다. 인터페이스의 모든 메소드는, MBean 의 속성이나 조작의 어느쪽이든을 정의합니다. 디폴트에서는, 모든 메소드는 조작을 정의합니다. 속성과 조작은, 특정의 설계 패턴에 따른 간단한 메소드입니다. 표준 MBean 는, 개시된 모든 속성과 조작의 메소드를 일람으로 한 MBean 인터페이스와 이 인터페이스를 구현해, 계측 된 자원에 기능을 할당하는 클래스로부터 구성됩니다.  
</p>
<a name="wp1053237"> </a> <p class="pBody">
이후의 섹션에서는, 표준 MBean 의 예와 MBean 를 관리하는 간단한 JMX 에이전트를 상세하게 분석합니다. 샘플 코드는 디렉토리 <em style="font-style: oblique" class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Essential/com/example/mbeans</code> 로부터 발췌하고 있습니다.
</p>
<a name="wp1053109"> </a> <h3 class="pHeading2">
2.1. 1	MBean 인터페이스
</h3>
<a name="wp1053112"> </a> <p class="pBody">
<code class="cCode">HelloMBean</code> 라고 하는 매우 기본적인 MBean 인터페이스의 예를,<a  href="essential.html#wp1053113">코드예&#160;2-1</a>  에 나타냅니다.  
</p>
<a name="wp1053113"> </a> <div class="pCodeCaption">
코드예&#160;2-1	MBean 인터페이스, HelloMBean 의 예
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1053114"> </a> 
package com.example.mbeans;<a name="wp1053308"> </a> 
<a name="wp1053310"> </a> 
public interface HelloMBean {<a name="wp1053311"> </a> 
<a name="wp1053312"> </a> 
    public void sayHello();<a name="wp1053313"> </a> 
    public int add(int x, int y);<a name="wp1053314"> </a> 
<a name="wp1053315"> </a> 
    public String getName();<a name="wp1053316"> </a> 
<a name="wp1053317"> </a> 
    public int getCacheSize();<a name="wp1053318"> </a> 
    public void setCacheSize(int size);<a name="wp1053319"> </a> 
}<a name="wp1053320"> </a> 
<a name="wp1053131"> </a> 
</pre></div>
<a name="wp1053321"> </a> <p class="pBody">
지금까지 말한 것처럼, MBean 인터페이스는 규칙에 의해, 이 인터페이스를 구현하는 Java 클래스의 이름의 뒤에 <em style="font-style: oblique" class="cEmphasis">MBean</em> 를 더해 이름을 구성합니다. 이 때문에, 이 경우, 인터페이스는 <code class="cCode">HelloMBean</code> 라는 이름이 됩니다. 이 인터페이스를 구현하는 <code class="cCode">Hello</code> 클래스에 대해서는,<a  href="essential.html#wp1053360"><span style="color: #3366CC">「2.1. 2 MBean 의 구현」</span></a> 으로 설명합니다.  
</p>
<a name="wp1053345"> </a> <p class="pBody">
JMX 스펙에 의하면, MBean 인터페이스는, 이름과 형태의 지정된 read 가능해, 경우에 따라서는 기입해 가능한 속성과 MBean 가 관리하는 어플리케이션에 의해 호출하는 것이 가능한, 이름과 형태의 지정된 조작으로부터 구성됩니다. <a  href="essential.html#wp1053113"><a  href="essential.html#wp1053113">코드예&#160;2-1</a>  에 나타낸 <code class="cCode">HelloMBean</code> 인터페이스에서는, 다음의 2 개의 조작을 선언하고 있습니다. Java 메소드 <code class="cCode">add()</code> 와 <code class="cCode">sayHello()</code> 입니다.  
</p>
<a name="wp1053457"> </a> <p class="pBody">
<code class="cCode">HelloMbean</code> 로 선언되는 2 개의 속성 가운데,<code class="cCode">Name</code> 는 읽어들여 전용의 캐릭터 라인으로,<code class="cCode">CacheSize</code> 는 read와 기입의 양쪽 모두가 가능한 정수입니다. 취득 메소드와 설정 메소드는, 관리 대상 어플리케이션에 속성의 값에의 액세스와 경우에 따라서는 값의 변경을 허가하기 위해서 선언됩니다. JMX 스펙에 정의되도록(듯이), 취득 메소드는 <em style="font-style: oblique" class="cEmphasis">get</em> 로부터 이름이 시작되어, void 를 돌려주지 않는 모든 public 메소드입니다. 취득 메소드를 사용하면(자), 매니저는 반환된 객체의 형태와 일치하는 속성의 값을 읽어들일 수가 있습니다. 설정 메소드는 이름이 <em style="font-style: oblique" class="cEmphasis">set</em> 로부터 시작되어, 단일의 파라미터를 취하는 모든 public 메소드입니다. 설정 메소드를 사용하면(자), 매니저는 파라미터와 같은 형태의 값을 속성에 새롭게 기입할 수가 있습니다.
</p>
<a name="wp1053352"> </a> <p class="pBody">
다음의 섹션에서는, 이러한 조작 및 속성의 구현을 설명합니다.
</p>
<a name="wp1053360"> </a> <h3 class="pHeading2">
2.1. 2	MBean 의 구현
</h3>
<a name="wp1053361"> </a> <p class="pBody">
<a  href="essential.html#wp1053363">코드예&#160;2-2</a>  에 나타낸 <code class="cCode">Hello</code> 클래스는,<code class="cCode">HelloMBean</code> 를 구현하고 있습니다.
</p>
<a name="wp1053363"> </a> <div class="pCodeCaption">
코드예&#160;2-2	MBean 의 구현예, 클래스 Hello
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1053135"> </a> 
package com.example.mbeans;<a name="wp1053136"> </a> 
<a name="wp1053137"> </a> 
public class Hello implements HelloMBean {<a name="wp1053138"> </a> 
    public void sayHello() {<a name="wp1053139"> </a> 
	System.out.println(&quot;hello, world&quot;);<a name="wp1053140"> </a> 
    }<a name="wp1053141"> </a> 
<a name="wp1053142"> </a> 
    public int add(int x, int y) {<a name="wp1053143"> </a> 
	return x + y;<a name="wp1053144"> </a> 
    }<a name="wp1053145"> </a> 
<a name="wp1053146"> </a> 
    public String getName() {<a name="wp1053147"> </a> 
	return this.name;<a name="wp1053148"> </a> 
    }<a name="wp1053149"> </a> 
<a name="wp1053150"> </a> 
<a name="wp1053151"> </a> 
    public int getCacheSize() {<a name="wp1053152"> </a> 
	return this.cacheSize;<a name="wp1053153"> </a> 
    }<a name="wp1053154"> </a> 
<a name="wp1053155"> </a> 
    public synchronized void setCacheSize(int size) {<a name="wp1053156"> </a> 
	this.cacheSize = size;<a name="wp1053157"> </a> 
<a name="wp1053158"> </a> 
	System.out.println(&quot;Cache size now &quot; + this.cacheSize);<a name="wp1053159"> </a> 
    }<a name="wp1053160"> </a> 
<a name="wp1053161"> </a> 
    private final String name = &quot;Reginald&quot;;<a name="wp1053162"> </a> 
    private int cacheSize = DEFAULT_CACHE_SIZE;<a name="wp1053163"> </a> 
    private static final int DEFAULT_CACHE_SIZE = 200;<a name="wp1053164"> </a> 
}<a name="wp1053165"> </a> 
<a name="wp1053166"> </a> 
</pre></div>
<a name="wp1053167"> </a> <p class="pBody">
간단한 Java 클래스 <code class="cCode">Hello</code> 는,<code class="cCode">HelloMBean</code> 로 선언된 조작과 속성을 정의합니다. 이 예로부터 알도록(듯이),<code class="cCode">sayHello()</code> 와 <code class="cCode">add()</code> 의 조작은 극히 간단합니다만, 실제의 조작은 필요에 따라서 간단하게도, 복잡한 것에도 할 수 있습니다.  
</p>
<a name="wp1053381"> </a> <p class="pBody">
<code class="cCode">Name</code> 속성을 취득하는 메소드와<code class="cCode">cacheSize</code> 속성을 취득해 설정하는 메소드도 정의됩니다. 이 예에서는,<code class="cCode">Name</code> 속성의 값은 바뀌지 않습니다만, 실제의 장면에서는, 관리 대상 자원의 실행에 의해 바뀌는 경우가 있습니다. 예를 들어, 속성은 가동 시간이나 메모리의 사용량등의 통계를 나타내는 경우가 있습니다. 여기에서는, 속성은 「Reginald」라고 하는 이름만입니다.
</p>
<a name="wp1053426"> </a> <p class="pBody">
<code class="cCode">setCacheSize</code> 메소드를 호출하면(자),<code class="cCode">cacheSize</code> 속성의 값이 선언된 디폴트의 값 200 으로부터 변경할 수 있습니다.  실제로는,<code class="cCode">cacheSize</code> 속성을 변경하는 경우는, 엔트리의 파기나 새로운 엔트리의 할당 등, 다른 조작을 실행하지 않으면 안됩니다. 이 예에서는, 캐쉬 사이즈가 변경된 것을 확인하는 메세지만이 인쇄됩니다만,<code class="cCode">println()</code> 를 호출할 뿐(만큼)의 조작 대신에, 보다 복잡한 조작을 정의할 수가 있습니다.
</p>
<a name="wp1053438"> </a> <p class="pBody">
간단한 <code class="cCode">Hello</code> MBean 와 그 인터페이스를 정의하면(자), 다음의 섹션에 나타내도록(듯이), Hello MBean 와 인터페이스로 나타내지는 자원을 Hello MBean 와 인터페이스를 사용해 관리할 수가 있습니다.
</p>
<a name="wp1053168"> </a> <h3 class="pHeading2">
2.1. 3	자원의 관리
</h3>
<a name="wp1053169"> </a> <p class="pBody">
「Java Management Extensions (JMX) 테크놀러지 개요」로 가리킨 것처럼, MBean 에 의해 자원이 계측 되면(자), 그 자원의 관리는 JMX 에이전트에 의해 행해집니다.  
</p>
<a name="wp1053494"> </a> <p class="pBody">
JMX 에이전트의 코어 컴퍼넌트는, MBean 를 등록하는 관리 대상 객체 서버인 <em class="cEmphasis">MBean</em> 서버입니다 (MBean 서버의 구현의 자세한 것은,<code class="cCode">MBeanServer</code> 인터페이스의 API 문서를 참조). JMX 에이전트에는, MBean 를 관리하기 위한 일련의 서비스도 포함됩니다.
</p>
<a name="wp1053497"> </a> <p class="pBody">
<a  href="essential.html#wp1053170">코드예&#160;2-3</a>  에서는,<code class="cCode">Main</code> 라고 하는 기본적인 JMX 에이전트를 나타내고 있습니다.
</p>
<a name="wp1053170"> </a> <div class="pCodeCaption">
코드예&#160;2-3	JMX 에이전트의 작성
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1053171"> </a> 
package com.example.mbeans;<a name="wp1053173"> </a> 
<a name="wp1053174"> </a> 
import java.lang.management. *;<a name="wp1053175"> </a> 
import javax.management. *;<a name="wp1053176"> </a> 
<a name="wp1053177"> </a> 
public class Main {<a name="wp1053178"> </a> 
<a name="wp1053179"> </a> 
   public static void main(String[] args) throws Exception {<a name="wp1053180"> </a> 
<a name="wp1053181"> </a> 
      MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();<a name="wp1053182"> </a> 
<a name="wp1053538"> </a> 
      ObjectName name = new ObjectName(&quot;com.example.mbeans:type=Hello&quot;);<a name="wp1053540"> </a> 
<a name="wp1053541"> </a> 
      Hello mbean = new Hello();<a name="wp1053188"> </a> 
<a name="wp1053189"> </a> 
      mbs.registerMBean(mbean, name);<a name="wp1053191"> </a> 
<a name="wp1053192"> </a> 
      System.out.println(&quot;Waiting forever...&quot;);<a name="wp1053194"> </a> 
      Thread.sleep(Long.MAX_VALUE);<a name="wp1053195"> </a> 
   }<a name="wp1053196"> </a> 
}<a name="wp1053197"> </a> 
<a name="wp1053198"> </a> 
</pre></div>
<a name="wp1053199"> </a> <p class="pBody">
JMX 에이전트 <code class="cCode">Main</code> 는, 우선 <code class="cCode">java.lang.management.ManagementFactory</code> 클래스의 <code class="cCode">getPlatformMBeanServer()</code> 메소드를 호출해, 플랫폼상에서 가동하는 임의의 MBean 서버를 가져옵니다. 플랫폼상에서 가동중의 MBean 가 존재하지 않는 경우,<code class="cCode">getPlatformMBeanServer()</code> 에 의해 JMX 메소드 <code class="cCode">MBeanServerFactory.createMBeanServer()</code> 가 불려 가 자동적으로 가동중의 MBean 가 작성됩니다. <code class="cCode">Main</code> 로 취득되는 <code class="cCode">MBeanServer</code> 인스턴스는,<code class="cCode">mbs</code> 의 이름을 붙일 수 있습니다.
</p>
<a name="wp1053576"> </a> <p class="pBody">
다음에 <code class="cCode">Main</code> 는 작성하는 MBean 인스턴스를 위해서(때문에), 객체명을 정의합니다. 모든 JMX Mbean 에 객체명이 정의될 필요가 있습니다. 객체명은 JMX 클래스 <code class="cCode">ObjectName</code> 의 인스턴스이며, 도메인과 키프로파티의 리스트를 반드시 포함하는 등, JMX 스펙으로 정의되는 구문에 따를 필요가 있습니다 (이 구문의 자세한 것은,<code class="cCode">ObjectName</code> 클래스의 API 문서를 참조). <code class="cCode">Main</code> 로 정의되는 객체명,<code class="cCode">name</code> 에서는, 도메인은 <code class="cCode">com.example.mbeans</code> (MBean 의 예가 포함된 패키지)입니다.  또, 키프로파티는 이 객체가 <code class="cCode">Hello</code> 형인 것을 선언합니다.
</p>
<a name="wp1053612"> </a> <p class="pBody">
<code class="cCode">Hello</code> 객체의 인스턴스,<code class="cCode">mbean</code> 가 작성됩니다. 이 <code class="cCode">Hello</code> 객체는, 이것 자체가 <a  href="essential.html#wp1053360"><span style="color: #3366CC">「2.1. 2 MBean 의 구현」</span></a> 으로 정의된 MBean <code class="cCode">Hello</code> 의 인스턴스입니다.  
</p>
<a name="wp1053626"> </a> <p class="pBody">
다음에 <code class="cCode">Hello</code> 객체 <code class="cCode">mbean</code> 는, 객체명 <code class="cCode">name</code> 를 사용해 MBean server <code class="cCode">mbs</code> 에 MBean 로서 등록됩니다.  이 때문에, 객체와 객체명을 건네주어 JMX 메소드 <code class="cCode">MBeanServer.registerMBean()</code> 를 호출합니다.  
</p>
<a name="wp1053635"> </a> <p class="pBody">
<code class="cCode">Hello</code> MBean 를 MBean 서버에 등록한 후,<code class="cCode">Main</code> 는 관리 조작이 <code class="cCode">Hello</code> 로 실행되는 것을 대기합니다. 이 예의 범위에서는, 이러한 관리 조작은 <code class="cCode">sayHello()</code> 와 <code class="cCode">add()</code> 를 호출해, 속성치를 취득 및 설정해 있습니다.
</p>
<a name="wp1053244"> </a> <h3 class="pHeading2">
2.1. 4	표준 MBean 의 예제의 실행
</h3>
<a name="wp1053661"> </a> <p class="pBody">
클래스의 예제를 검증한 후, 이번은 예제를 실행합니다. Java Platform, Standard Edition 에는 JConsole 라고 하는 관리·감시 콘솔이 부속되어 있어 이 예에서는 MBean 와의 대화에 사용되고 있습니다. JConsole 는 <em class="cEmphasis">JavaSE_HOME</em><code class="cCode">/bin/jconsole</code> 에 있습니다. <em class="cEmphasis">JavaSE_HOME</em> 는 Java Platform, Standard Edition (Java SE 플랫폼)가 인스톨 된 디렉토리입니다.
</p>
<a name="wp1053680"> </a> <p class="pBody">
예제를 실행하려면 , 다음의 순서에 따르는지,<code class="cCode">README</code> 파일을 참조합니다.
</p>
<div class="pStep1">
<ol class="pStep1"><a name="wp1053245"> </a> <li><em class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Essential</code> 를 아직 열려 있지 않은 경우는 엽니다. </li>
<a name="wp1053664"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">cd </span><em class="cEmphasis">work_dir</em><span class="cUserType">/jmx_examples/Essential</span>
</p>
<a name="wp1053666"> </a> <li>Java 클래스의 예를 컴파일 합니다. </li>
<a name="wp1053676"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">javac com/example/mbeans/*.java</span>
</p>
<a name="wp1053678"> </a> <li><code class="cCode">Main</code> 어플리케이션을 기동합니다. </li>
<a name="wp1053689"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">java com.example.mbeans.Main</span>
</p>
<a name="wp1053691"> </a> <p class="pBody">
이벤트의 발생을 대기중의 <code class="cCode">Main</code> 에 관한 확인이 표시됩니다.
</p>
<a name="wp1053692"> </a> <li>같은 머신의 다른 단말 윈도우로, JConsole 를 기동합니다. </li>
<a name="wp1053694"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">jconsole</span>
</p>
<a name="wp1053696"> </a> <p class="pBody">
JConsole 툴이 열려, 접속 가능한 가동중의 JMX 에이전트의 리스트가 표시됩니다.
</p>
<a name="wp1053695"> </a> <li>「New Connection」윈도우의 리스트로부터 <code class="cCode">com.example.mbeans.Main</code> 를 선택해, 「Connect」를 클릭합니다. </li>
<a name="wp1053700"> </a> <p class="pBody">
플랫폼의 현재의 액티버티의 개요가 표시됩니다.
</p>
<a name="wp1053703"> </a> <li>「MBean」탭을 클릭합니다. </li>
<a name="wp1054446"> </a> <p class="pBody">
이 패널에, 현재 MBean 서버에 등록되어 모든 MBean 가 표시됩니다.
</p>
<a name="wp1054447"> </a> <li>왼쪽 프레임의 MBean 트리에 있는 <code class="cCode">com.example.mbeans</code> 노드를 전개합니다. </li>
<a name="wp1055574"> </a> <p class="pBody">
<code class="cCode">Main</code> 로 작성되어 등록된 MBean <code class="cCode">Hello</code> 의 예가 표시됩니다. 「<code class="cCode">Hello</code>」를 클릭하면(자), 관련하는 Attributes 및 Operations 노드가 MBean 트리에 표시됩니다.
</p>
<a name="wp1055580"> </a> <li>MBean 트리에 있는 <code class="cCode">Hello</code> MBean 노드를 클릭합니다. </li>
<a name="wp1055581"> </a> <p class="pBody">
<code class="cCode">Hello</code> MBean 의 메타데이타와 거기에 관련하는 기술자가 표시됩니다.
</p>
<a name="wp1055575"> </a> <li>MBean 트리에 있는 <code class="cCode">Hello</code> MBean 의 <code class="cCode">Attributes</code> 노드를 클릭합니다.  </li>
<a name="wp1053708"> </a> <p class="pBody">
<code class="cCode">Hello</code> 클래스에서 정의된 MBean 속성이 표시됩니다.
</p>
<a name="wp1053713"> </a> <li><code class="cCode">CacheSize</code> 속성의 값을 150 으로 변경합니다. </li>
<a name="wp1053714"> </a> <p class="pBody">
<code class="cCode">Main</code> 를 기동한 단말 윈도우에, 이 속성의 변경을 확인하는 prompt가 표시됩니다.
</p>
<a name="wp1053715"> </a> <li>MBean 트리에 있는 Hello MBean 의 <code class="cCode">Operations</code> 노드를 클릭합니다. </li>
<a name="wp1053716"> </a> <p class="pBody">
여기서,<code class="cCode">Hello</code> MBean 로 선언된 2 개의 조작,<code class="cCode">sayHello()</code> 와 <code class="cCode">add()</code> 가 표시됩니다.
</p>
<a name="wp1053717"> </a> <li><code class="cCode">［sayHello］</code> 버튼을 클릭해,<code class="cCode">sayHello()</code> 조작을 기동합니다. </li>
<a name="wp1053728"> </a> <p class="pBody">
메소드가 정상적으로 불려 갔던 것이 JConsole 의 다이알로그 박스에 통지되어<code class="cCode">Main</code> 가 기동하고 있는 단말의 윈도우에 「<em class="cEmphasis">hello, world</em>」라고 하는 메세지가 표시됩니다.
</p>
<a name="wp1053729"> </a> <li><code class="cCode">add()</code> 조작으로 가산하는 2 개의 정수를 지정해,<code class="cCode">[add]</code> 버튼을 클릭합니다. </li>
<a name="wp1053725"> </a> <p class="pBody">
[JConsole] 다이알로그 박스에 해답이 통지됩니다.
</p>
<a name="wp1053737"> </a> <li>「Connection」를 클릭해, 다음에 「Exit」를 클릭해, JConsole 를 종료합니다. </li>
</ol>
</div>
<a name="wp1053200"> </a> <h2 class="pHeading1">
2.2	통지의 송신
</h2>
<a name="wp1053745"> </a> <p class="pBody">
MBean 는 상태의 변화, 검출된 이벤트, 또는 문제등을 알리는 통지를 생성합니다.  
</p>
<a name="wp1053835"> </a> <p class="pBody">
MBean 가 통지를 생성하기 위해서는, 인터페이스 <code class="cCode">NotificationBroadcaster</code> 인가, 또는 그 서브 인터페이스 <code class="cCode">NotificationEmitter</code> 를 구현하고 있을 필요가 있습니다. 통지의 송신에 필요한 조작은, 클래스 <code class="cCode">javax.management.Notification</code> 또는 서브 클래스 (<code class="cCode">AttributeChangedNotification</code> 등)의 인스턴스를 구축해, 그것을 <code class="cCode">NotificationBroadcasterSupport.sendNotification</code> 에 건네줄 뿐입니다.
</p>
<a name="wp1053810"> </a> <p class="pBody">
모든 통지에 발행원이 있습니다. 발행원은 통지를 발행한 MBean 의 객체명입니다.  
</p>
<a name="wp1053767"> </a> <p class="pBody">
모든 통지에는 순서 번호가 할당해지고 있습니다. 순서가 중요한 의미를 가지는 경우, 및 통지가 잘못한 순서로 처리되는 위험성이 있는 경우, 이 번호를 사용해 같은 소스로부터 도착한 통지를 늘어놓을 수가 있습니다. 순서 번호를 제로로 해도 괜찮습니다가, 특정의 MBean 로부터 통지가 도착할 때마다 인크리먼트(increment) 하는 (분)편이 적절합니다.
</p>
<a name="wp1053842"> </a> <p class="pBody">
표준 MBean 가 디렉토리 <em style="font-style: oblique" class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Notification/com/example/mbeans</code> 로 통지를 발행하는 예를 생각해 보겠습니다. 이 예는,<a  href="essential.html#wp1053106"><span style="color: #3366CC">「2.1 표준 MBean」</span></a> 로 가리킨 예제와 기본적으로는 같습니다만,<code class="cCode">Hello</code> MBean 가 <code class="cCode">NotificationBroadcaster</code> 인터페이스를 구현하고 있는 점으로써 차이가 납니다.
</p>
<a name="wp1053861"> </a> <h3 class="pHeading2">
2.2. 1	NotificationBroadcaster 인터페이스
</h3>
<a name="wp1053864"> </a> <p class="pBody">
전술과 같이, 이 예제와 <a  href="essential.html#wp1053106"><span style="color: #3366CC">「2.1 표준 MBean」</span></a> 로 가리킨 예제의 유일한 차이는, MBean 의 구현에 의해 통지의 송신을 할 수 있다고 하는 점입니다.
</p>
<a name="wp1053868"> </a> <p class="pBody">
<a  href="essential.html#wp1053870">코드예&#160;2-4</a>  에 나타낸 것처럼, 통지는 <code class="cCode">NotificationBroadcaster</code> 인터페이스를 구현하는 것으로 기동합니다.
</p>
<a name="wp1053870"> </a> <div class="pCodeCaption">
코드예&#160;2-4	MBean 의 통지의 구현
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1053875"> </a> 
package com.example.mbeans;<a name="wp1053876"> </a> 
<a name="wp1053879"> </a> 
import javax.management. *;<a name="wp1053880"> </a> 
<a name="wp1053881"> </a> 
public class Hello<a name="wp1053882"> </a> 
        extends NotificationBroadcasterSupport implements HelloMBean {<a name="wp1053883"> </a> 
<a name="wp1053884"> </a> 
    public void sayHello() {<a name="wp1053885"> </a> 
        System.out.println(&quot;hello, world&quot;);<a name="wp1053886"> </a> 
    }<a name="wp1053887"> </a> 
<a name="wp1053888"> </a> 
    public int add(int x, int y) {<a name="wp1053889"> </a> 
        return x + y;<a name="wp1053890"> </a> 
    }<a name="wp1053891"> </a> 
<a name="wp1053892"> </a> 
    public String getName() {<a name="wp1053893"> </a> 
        return this.name;<a name="wp1053894"> </a> 
    }<a name="wp1053895"> </a> 
<a name="wp1053896"> </a> 
    public int getCacheSize() {<a name="wp1053897"> </a> 
        return this.cacheSize;<a name="wp1053898"> </a> 
    }<a name="wp1053899"> </a> 
<a name="wp1053900"> </a> 
    public synchronized void setCacheSize(int size) {<a name="wp1053901"> </a> 
        int oldSize = this.cacheSize;<a name="wp1053902"> </a> 
        this.cacheSize = size;<a name="wp1053903"> </a> 
<a name="wp1053904"> </a> 
        System.out.println(&quot;Cache size now &quot; + this.cacheSize);<a name="wp1053905"> </a> 
<a name="wp1053906"> </a> 
        Notification n =<a name="wp1053907"> </a> 
            new AttributeChangeNotification(this,<a name="wp1053908"> </a> 
					    sequenceNumber++,<a name="wp1053909"> </a> 
					    System.currentTimeMillis(),<a name="wp1053910"> </a> 
					    &quot;CacheSize changed&quot;,<a name="wp1053911"> </a> 
					    &quot;CacheSize&quot;,<a name="wp1053912"> </a> 
					    &quot;int&quot;,<a name="wp1053913"> </a> 
					    oldSize,<a name="wp1053914"> </a> 
					    this.cacheSize);<a name="wp1053915"> </a> 
<a name="wp1053916"> </a> 
	sendNotification(n);<a name="wp1053917"> </a> 
    }<a name="wp1053918"> </a> 
<a name="wp1053919"> </a> 
    @Override<a name="wp1053920"> </a> 
    public MBeanNotificationInfo[] getNotificationInfo() {<a name="wp1053921"> </a> 
        String[] types = new String[] {<a name="wp1054000"> </a> 
            AttributeChangeNotification.ATTRIBUTE_CHANGE<a name="wp1054001"> </a> 
        };<a name="wp1054002"> </a> 
        String name = AttributeChangeNotification.class.getName();<a name="wp1053925"> </a> 
        String description = &quot;An attribute of this MBean has changed&quot;;<a name="wp1053926"> </a> 
        MBeanNotificationInfo info =<a name="wp1053927"> </a> 
            new MBeanNotificationInfo(types, name, description);<a name="wp1053928"> </a> 
        return new MBeanNotificationInfo[] {info};<a name="wp1053929"> </a> 
    }<a name="wp1053930"> </a> 
<a name="wp1053931"> </a> 
    private final String name = &quot;Reginald&quot;;<a name="wp1053932"> </a> 
    private int cacheSize = DEFAULT_CACHE_SIZE;<a name="wp1053933"> </a> 
    private static final int DEFAULT_CACHE_SIZE = 200;<a name="wp1053934"> </a> 
<a name="wp1053935"> </a> 
    private long sequenceNumber = 1;<a name="wp1053936"> </a> 
}<a name="wp1053937"> </a> 
<a name="wp1053877"> </a> 
</pre></div>
<a name="wp1053942"> </a> <p class="pBody">
<a  href="essential.html#wp1053870">코드예&#160;2-4</a>  에 나타냈던 대로, 이 <code class="cCode">Hello</code> MBean 의 구현에 의해 <code class="cCode">NotificationBroadcasterSupport</code> 클래스가 확장되어 이 클래스 자체에 <code class="cCode">NotificationEmitter</code> 인터페이스가 구현됩니다.  
</p>
<a name="wp1053952"> </a> <p class="pBody">
조작과 속성의 설정 방법법은 이전과 같습니다만, 유일 바뀐 것은 <code class="cCode">cacheSize</code> 속성의 설정 메소드가 <code class="cCode">oldSize</code> 라고 하는 새로운 값을 정의하는 점입니다. 이 값은 설정 조작전에 <code class="cCode">cacheSize</code> 속성의 값을 기록합니다.
</p>
<a name="wp1053955"> </a> <p class="pBody">
통지는,<code class="cCode">javax.management.Notification</code> 를 확장하는 JMX 클래스 <code class="cCode">AttributeChangeNotification</code> 의 인스턴스 <code class="cCode">n</code> 로부터 구축됩니다. 이 통지는 <code class="cCode">AttributeChangeNotification</code> 에 파라미터로서 건네받는 다음의 정보에 근거해,<code class="cCode">setCacheSize()</code> 메소드의 정의내에서 구축됩니다.
</p>
<ul class="pBullet1"><a name="wp1053963"> </a> <div class="pBullet1"><li><code class="cCode">Hello</code> MBean 등의 통지의 발행원의 객체명.  간단하게 <code class="cCode">this</code> 와 나타내진다</li></div>
<a name="wp1053968"> </a> <div class="pBullet1Plus"><li>순서 번호.  이 예에서는, 롱명 <code class="cCode">setCacheSize()</code> 가 사용되어 1 으로 설정된 후, 1 개(살)씩 인크리먼트(increment) 한다</li></div>
<a name="wp1053971"> </a> <div class="pBullet1Plus"><li>타임 스탬프</li></div>
<a name="wp1053974"> </a> <div class="pBullet1Plus"><li>통지 메세지의 내용</li></div>
<a name="wp1053976"> </a> <div class="pBullet1Plus"><li>변경된 속성의 이름.  이 경우는 <code class="cCode">cacheSize</code></li></div>
<a name="wp1053977"> </a> <div class="pBullet1Plus"><li>변경된 속성의 형태</li></div>
<a name="wp1053978"> </a> <div class="pBullet1Plus"><li>낡은 속성치.  이 경우는 <code class="cCode">oldSize</code></li></div>
<a name="wp1053979"> </a> <div class="pBullet1Last"><li>새로운 속성치.  이 경우는 <code class="cCode">this.cacheSize</code></li></div>
</ul>
<a name="wp1053980"> </a> <p class="pBody">
이 후, 통지 n 가 <code class="cCode">NotificationBroadcasterSupport.sendNotification()</code> 메소드에게 건네집니다.  
</p>
<a name="wp1053984"> </a> <p class="pBody">
마지막으로,<code class="cCode">MBeanNotification</code> 가 정의되어 특정의 Java 클래스의 통지, 이 경우는 <code class="cCode">AttributeChangeNotification</code> 에 대해서 MBean 가 발행한 다른 통지 인스턴스의 특성이 설명됩니다.
</p>
<a name="wp1053962"> </a> <p class="pBody">
MBean 인터페이스 <code class="cCode">HelloMBean</code> 와 JMX 에이전트 <code class="cCode">Main</code> 는, 전출의 예로 사용된 것 것과 같습니다.
</p>
<a name="wp1054006"> </a> <h3 class="pHeading2">
2.2. 2	MBean 의 통지의 예제의 실행
</h3>
<a name="wp1054011"> </a> <p class="pBody">
클래스의 예제를 검증한 후, 이번은 예제를 실행합니다. 이 예에서는,<code class="cCode">Hello</code> MBean 와의 대화에 재차 JConsle 를 사용합니다.  예를 실행하는 경우는, 다음의 순서에 따르는지,<code class="cCode">README</code> 파일을 참조해 주세요.
</p>
<div class="pStep1">
<ol class="pStep1"><a name="wp1054014"> </a> <li><em class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Notification</code> 를 아직 열려 있지 않은 경우는, 엽니다. </li>
<a name="wp1054015"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">cd </span><em class="cEmphasis">work_dir</em><span class="cUserType">/jmx_examples/Notification</span>
</p>
<a name="wp1054016"> </a> <li>Java 클래스의 예를 컴파일 합니다. </li>
<a name="wp1054017"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">javac com/example/mbeans/*.java</span>
</p>
<a name="wp1054018"> </a> <li><code class="cCode">Main</code> 어플리케이션을 기동합니다. </li>
<a name="wp1054020"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">java com.example.mbeans.Main</span>
</p>
<a name="wp1054021"> </a> <p class="pBody">
이벤트의 발생을 대기중의 <code class="cCode">Main</code> 에 관한 확인이 표시됩니다.
</p>
<a name="wp1054022"> </a> <li>같은 머신의 다른 단말 윈도우로, JConsole 를 기동합니다. </li>
<a name="wp1054023"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">jconsole</span>
</p>
<a name="wp1054024"> </a> <p class="pBody">
JConsole 툴이 열려, 접속 가능한 가동중의 JMX 에이전트의 리스트가 표시됩니다.
</p>
<a name="wp1054033"> </a> <li>「New Connection」윈도우의 리스트로부터 <code class="cCode">com.example.mbeans.Main</code> 를 선택해, 「Connect」를 클릭합니다. </li>
<a name="wp1054034"> </a> <p class="pBody">
플랫폼의 현재의 액티버티의 개요가 표시됩니다.
</p>
<a name="wp1054035"> </a> <li>「MBean」탭을 클릭합니다. </li>
<a name="wp1054036"> </a> <p class="pBody">
이 패널에, 현재 MBean 서버에 등록되어 모든 MBean 가 표시됩니다.
</p>
<a name="wp1054037"> </a> <li>왼쪽 프레임의 MBean 트리에 있는 <code class="cCode">com.example.mbeans</code> 노드를 전개합니다. </li>
<a name="wp1054491"> </a> <p class="pBody">
<code class="cCode">Main</code> 로 작성되어 등록된 MBean <code class="cCode">Hello</code> 의 예가 표시됩니다. 「<code class="cCode">Hello</code>」를 클릭하면(자), 관련하는<code class="cCode">Attributes</code>,<code class="cCode">Operations</code>,<code class="cCode">Notifications</code> 의 각 노드가 MBean 트리에 표시됩니다.  
</p>
<a name="wp1054039"> </a> <li>MBean 트리에 있는 <code class="cCode">Hello</code> MBean 노드를 클릭합니다. </li>
<a name="wp1054040"> </a> <p class="pBody">
이것에 의해, MBean 의 메타데이타와 관련하는 기술자가 표시됩니다.
</p>
<a name="wp1054078"> </a> <li>MBean 트리에 있는 Hello MBean 의 <code class="cCode">Notifications</code> 노드를 클릭합니다. </li>
<a name="wp1054083"> </a> <p class="pBody">
빈 상태(empty)의 패널이 표시됩니다.
</p>
<a name="wp1054084"> </a> <li>「Subscribe」버튼을 클릭합니다. </li>
<a name="wp1055606"> </a> <p class="pBody">
현재의 수령 통지수 (0)가, Notifications 노드 라벨에 표시됩니다.
</p>
<a name="wp1055607"> </a> <li>MBean 트리에 있는 <code class="cCode">Hello</code> MBean 의 <code class="cCode">Attributes</code> 노드를 클릭해,<code class="cCode">CacheSize</code> 속성을 150 으로 변경합니다. </li>
<a name="wp1054533"> </a> <p class="pBody">
<code class="cCode">Main</code> 를 기동한 단말 윈도우에, 이 속성의 변경을 확인하는 prompt가 표시됩니다. 또, Notifications 노드에 표시되는 수령 통지수가 1 으로 변경되고 있습니다.  
</p>
<a name="wp1054542"> </a> <li>MBean 트리에 있는 <code class="cCode">Hello</code> MBean 의 <code class="cCode">Notifications</code> 노드를 이제(벌써) 1 번 클릭합니다.  </li>
<a name="wp1054089"> </a> <p class="pBody">
송신된 통지의 상세가 표시됩니다.
</p>
<a name="wp1054051"> </a> <li>「Connection」를 클릭해, 다음에 「Exit」를 클릭해, JConsole 를 종료합니다. </li>
</ol>
</div>
<a name="wp1054550"> </a> <p class="pBody">

</p>
<a name="wp1054551"> </a> <h2 class="pHeading1">
2.3	MXBean 의 도입
</h2>
<a name="wp1054585"> </a> <p class="pBody">
MXBean 는 새로운 타입의 MBean 입니다. 정의 끝난 형태 세트만을 참조하는 MBean 의 코딩을 간단하게 할 수 있습니다. 이 방법이라면, 원격 클라이언트를 포함한 클라이언트는, MBean 의 형태를 나타내는 모델 고유의 클래스에 액세스 하지 않아도, MBean 를 이용할 수 있습니다. MXBean 는, 클라이언트에 특히 번들 조작의 구성을 요구하는 일 없이, 관련하는 값을 번들 하는 편리한 수법을 제공합니다.
</p>
<a name="wp1054554"> </a> <p class="pBody">
표준 MBean 의 경우와 같이, MXBean 를 정의하려면 ,<em style="font-style: oblique" class="cEmphasis">Something</em><code class="cCode">MXBean</code> 라고 하는 Java 인터페이스와 그 인터페이스를 구현하는 Java 클래스를 기술합니다. 다만, 표준 MBean 과는 달리, MXBean 에서는 그 Java 클래스를 <code class="cCode">Something</code> 라고 부를 필요는 없습니다. 이 인터페이스내의 각 메소드는, MXBean 의 속성과 조작의 어느쪽이든을 정의합니다. 그 외 ,<code class="cCode">@MXBean</code> 주석을 사용하는 경우는, 인터페이스명에 MXBean 확장자(extension)를 붙이는 대신에, Java 인터페이스에 주석을 붙일 수도 있습니다.
</p>
<a name="wp1054595"> </a> <p class="pBody">
MXBean 는, 클라이언트에 특히 번들 조작의 구성을 요구하는 일 없이, MBean 라고 대화하면서 관련하는 값을 MBean 에 번들 하는 편리한 수법을 제공합니다. MXBean 는 Java 2 Platform, Standard Edition (J2SE) 5.0 의 <code class="cCode">java.lang.management</code> 패키지에 들어가 있습니다. Java SE 6 플랫폼에서는,<code class="cCode">java.lang.management</code> 로 정의된 표준 세트 뿐만이 아니라, 사용자 자신의 MXBean 를 정의할 수 있습니다.
</p>
<a name="wp1054573"> </a> <p class="pBody">
MXBean 의 주된 의도는, MXBean 인터페이스로 참조되는 <code class="cCode">java.lang.management.MemoryUsage</code> 등의 형태 (이 경우는 <code class="cCode">java.lang.management.MemoryMXBean</code>)를 표준형 세트에 맵 하는 것에 있습니다. 그 표준형 세트는 Open Type 로 불려<code class="cCode">javax.management.openmbean</code> 패키지로 정의됩니다. 정확한 매핑의 규칙은 「MXBean 의 스펙」에 기재되어 있습니다만, 대략적으로 말하면,<code class="cCode">int</code> 나 <code class="cCode">String</code> 와 같이 단순한 형태로 변경은 없고,<code class="cCode">MemoryUsage</code> 와 같이 복잡한 형태는 <code class="cCode">CompositeDataSupport</code> 표준형에 맵 됩니다.
</p>
<a name="wp1054629"> </a> <p class="pBody">
<code class="cCode">jmx_examples.zip</code> 파일을 다운로드해 해동하면(자), MXBean 의 조작을 설명한 샘플 프로그램이 <em style="font-style: oblique" class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/MXBean/com/example/mxbeans</code> 디렉토리에 작성됩니다. MXBean 의 샘플에는, 다음의 파일이 포함되어 있습니다.
</p>
<ul class="pBullet1"><a name="wp1054658"> </a> <div class="pBullet1"><li><code class="cCode">QueueSamplerMXBean</code> 인터페이스. </li></div>
<a name="wp1054668"> </a> <div class="pBullet1Plus"><li><code class="cCode">QueueSampler</code> 클래스. MXBean 인터페이스를 구현한다. </li></div>
<a name="wp1054671"> </a> <div class="pBullet1Plus"><li><code class="cCode">QueueSample</code> Java 의 형태. MXBean 인터페이스의 <code class="cCode">getQueueSample()</code> 메소드에 의해 반환된다. </li></div>
<a name="wp1055342"> </a> <div class="pBullet1Last"><li><code class="cCode">Main</code>. 샘플을 설정해 실행하는 프로그램</li></div>
</ul>
<a name="wp1055340"> </a> <p class="pBody">

</p>
<a name="wp1055077"> </a> <p class="pBody">
MXBean 의 샘플에는, 다음의 액션이 포함되어 있습니다.
</p>
<ul class="pBullet1"><a name="wp1055080"> </a> <div class="pBullet1"><li><code class="cCode">type Queue&lt;String&gt;</code> 의 자원을 관리하는, 단순한 MXBean 를 정의한다. </li></div>
<a name="wp1055090"> </a> <div class="pBullet1Plus"><li>불려 간다고 큐의 snapshot를 작성하는 MXBean 의 취득 메소드 <code class="cCode">getQueueSample</code> 를 선언해, 다음의 값을 번들 하는 Java 클래스 <code class="cCode">QueueSample</code> 를 돌려준다. </li></div>
<ul class="pBullet2"><a name="wp1055101"> </a> <div class="pBullet2"><li>snapshot가 작성되었을 때 각. </li></div>
<a name="wp1055108"> </a> <div class="pBullet2Plus"><li>큐의 사이즈. </li></div>
<a name="wp1055115"> </a> <div class="pBullet2Last"><li>지정되었을 때 각의 큐의 선두. </li></div>
</ul>
<a name="wp1055122"> </a> <div class="pBullet1Last"><li>MBean 서버에 MXBean 를 등록한다. </li></div>
</ul>
<a name="wp1054679"> </a> <h3 class="pHeading2">
2.3. 1	QueueSamplerMXBean 인터페이스
</h3>
<a name="wp1054680"> </a> <p class="pBody">
<a  href="essential.html#wp1054682">코드예&#160;2-5</a>  는,<code class="cCode">QueueSamplerMXBean</code> 인터페이스의 샘플 코드를 나타내고 있습니다.
</p>
<a name="wp1054682"> </a> <div class="pCodeCaption">
코드예&#160;2-5	QueueSamplerMXBean 인터페이스
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1054687"> </a> 
package com.example.mxbeans;<a name="wp1054691"> </a> 
<a name="wp1054692"> </a> 
public interface QueueSamplerMXBean {<a name="wp1054701"> </a> 
    public QueueSample getQueueSample();<a name="wp1054702"> </a> 
    public void clearQueue();<a name="wp1054703"> </a> 
}<a name="wp1054689"> </a> 
<a name="wp1054688"> </a> 
</pre></div>
<a name="wp1054706"> </a> <p class="pBody">
이 예로부터 알도록(듯이), MXBean 인터페이스의 선언은 표준 MBean 의 선언과 완전히 같습니다. <code class="cCode">QueueSamplerMXBean</code> 인터페이스에서는,<code class="cCode">getQueueSample</code> 와 <code class="cCode">clearQueue</code> 라고 하는 2 개의 조작을 선언하고 있습니다.  
</p>
<a name="wp1054728"> </a> <h3 class="pHeading2">
2.3. 2	QueueSampler 클래스
</h3>
<a name="wp1054729"> </a> <p class="pBody">
<code class="cCode">QueueSampler</code> 클래스는, <a  href="essential.html#wp1054743">코드예&#160;2-6</a>  에 나타내도록(듯이),<code class="cCode">QueueSamplerMXBean</code> 인터페이스를 구현하고 있습니다.
</p>
<a name="wp1054743"> </a> <div class="pCodeCaption">
코드예&#160;2-6	QueueSampler 클래스
</div>
<div class="pPreformatted"><pre class="pPreformatted">
package com.example.mxbeans;<a name="wp1054754"> </a> 
<a name="wp1054755"> </a> 
import java.util.Date;<a name="wp1054756"> </a> 
import java.util.Queue;<a name="wp1054757"> </a> 
<a name="wp1054758"> </a> 
public class QueueSampler implements QueueSamplerMXBean {<a name="wp1054759"> </a> 
    <a name="wp1054760"> </a> 
    private Queue&lt;String&gt; queue;<a name="wp1054761"> </a> 
    <a name="wp1054762"> </a> 
    public QueueSampler(Queue&lt;String&gt; queue) {<a name="wp1054763"> </a> 
       this.queue = queue;<a name="wp1054764"> </a> 
    }<a name="wp1054765"> </a> 
    <a name="wp1054766"> </a> 
    public QueueSample getQueueSample() {<a name="wp1054767"> </a> 
        synchronized (queue) {<a name="wp1054768"> </a> 
            return new QueueSample(new Date(), queue.size(), queue.peek());<a name="wp1054769"> </a> 
        }<a name="wp1054770"> </a> 
    }<a name="wp1054771"> </a> 
    <a name="wp1054772"> </a> 
    public void clearQueue() {<a name="wp1054773"> </a> 
        synchronized (queue) {<a name="wp1054774"> </a> 
            queue.clear();<a name="wp1054775"> </a> 
        }<a name="wp1054776"> </a> 
    }<a name="wp1054777"> </a> 
}<a name="wp1054778"> </a> 
<a name="wp1054748"> </a> 
</pre></div>
<a name="wp1054781"> </a> <p class="pBody">
MXBean 인터페이스로 선언된 MXBean 조작의 getQueueSample() 및 clearQueue()는,<code class="cCode">QueueSampler</code> 로 정의됩니다. getQueueSample() 조작은 단순하게,<code class="cCode">QueueSample</code> Java 형 (java.util. <code class="cCode">Queue</code> 메소드의 <code class="cCode">peek()</code> 및 <code class="cCode">size()</code> 에 의해 반환된 값을 사용해 작성)의 인스턴스와 java.util.Date 의 인스턴스를 돌려줍니다.  
</p>
<a name="wp1054813"> </a> <h3 class="pHeading2">
2.3. 3	QueueSampler 클래스
</h3>
<a name="wp1054828"> </a> <p class="pBody">
<code class="cCode">QueueSampler</code> 에 의해 반환된 <code class="cCode">QueueSample</code> 인스턴스는,<a  href="essential.html#wp1054833">코드예&#160;2-7</a>  에 나타낸 <code class="cCode">QueueSample</code> 클래스에서 정의됩니다.
</p>
<a name="wp1054833"> </a> <div class="pCodeCaption">
코드예&#160;2-7	QueueSampler 클래스
</div>
<div class="pPreformatted"><pre class="pPreformatted">
package com.example.mxbeans;<a name="wp1054840"> </a> 
<a name="wp1054841"> </a> 
import java.beans.ConstructorProperties;<a name="wp1054842"> </a> 
import java.util.Date;<a name="wp1054843"> </a> 
<a name="wp1054844"> </a> 
public class QueueSample {<a name="wp1054845"> </a> 
    <a name="wp1054846"> </a> 
    private final Date date;<a name="wp1054847"> </a> 
    private final int size;<a name="wp1054848"> </a> 
    private final String head;<a name="wp1054849"> </a> 
    <a name="wp1054850"> </a> 
    @ConstructorProperties({&quot;date&quot;, &quot;size&quot;, &quot;head&quot;})<a name="wp1054851"> </a> 
    public QueueSample(Date date, int size, String head) {<a name="wp1054852"> </a> 
        this.date = date;<a name="wp1054853"> </a> 
        this.size = size;<a name="wp1054854"> </a> 
        this.head = head;<a name="wp1054855"> </a> 
    }<a name="wp1054856"> </a> 
    <a name="wp1054857"> </a> 
    public Date getDate() {<a name="wp1054858"> </a> 
        return date;<a name="wp1054859"> </a> 
    }<a name="wp1054860"> </a> 
    <a name="wp1054861"> </a> 
    public int getSize() {<a name="wp1054862"> </a> 
        return size;<a name="wp1054863"> </a> 
    }<a name="wp1054864"> </a> 
    <a name="wp1054865"> </a> 
    public String getHead() {<a name="wp1054866"> </a> 
        return head;<a name="wp1054867"> </a> 
    }<a name="wp1054868"> </a> 
}<a name="wp1054869"> </a> 
<a name="wp1054836"> </a> 
</pre></div>
<a name="wp1054872"> </a> <p class="pBody">
<code class="cCode">QueueSample</code> 클래스에서는, MXBean 시스템가 <code class="cCode">QueueSample</code> 의 취득 메소드를 모두 호출해, 지정된 인스턴스를 <code class="cCode">CompositeData</code> 로 변환해,<code class="cCode">@ConstructorProperties</code> 주석을 사용해, <code class="cCode">CompositeData</code> 로부터 <code class="cCode">QueueSample</code> 인스턴스를 재구축 합니다.  
</p>
<a name="wp1054889"> </a> <h3 class="pHeading2">
2.3. 4	MXBean 의 작성과 MBean 서버에의 등록
</h3>
<a name="wp1054890"> </a> <p class="pBody">
MXBean 인터페이스와 이것을 구현하는 클래스, 및 반환되는 Java 형을 정의하면(자), 다음은 MXBean 를 작성해 MBean 서버에 등록할 필요가 있습니다. 이러한 액션은, 샘플 클래스 <code class="cCode">Main</code> 에 의해 행해집니다.
</p>
<a name="wp1054895"> </a> <div class="pCodeCaption">
코드예&#160;2-8	MXBean 의 Main 클래스의 예
</div>
<div class="pPreformatted"><pre class="pPreformatted">
package com.example.mxbeans;<a name="wp1055027"> </a> 
<a name="wp1055028"> </a> 
import java.lang.management.ManagementFactory;<a name="wp1055029"> </a> 
import java.util.Queue;<a name="wp1055030"> </a> 
import java.util.concurrent.ArrayBlockingQueue;<a name="wp1055031"> </a> 
import javax.management.MBeanServer;<a name="wp1055032"> </a> 
import javax.management.ObjectName;<a name="wp1055033"> </a> 
<a name="wp1055034"> </a> 
public class Main {<a name="wp1055035"> </a> 
<a name="wp1055036"> </a> 
    public static void main(String[] args) throws Exception {<a name="wp1055037"> </a> 
        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();<a name="wp1055038"> </a> 
        <a name="wp1055039"> </a> 
        ObjectName name =<a name="wp1055040"> </a> 
                new ObjectName(&quot;com.example.mxbeans:type=QueueSampler&quot;);<a name="wp1055041"> </a> 
        <a name="wp1055042"> </a> 
        Queue&lt;String&gt; queue = new ArrayBlockingQueue&lt;String&gt;(10);<a name="wp1055043"> </a> 
        queue.add(&quot;Request-1&quot;);<a name="wp1055044"> </a> 
        queue.add(&quot;Request-2&quot;);<a name="wp1055045"> </a> 
        queue.add(&quot;Request-3&quot;);<a name="wp1055046"> </a> 
        QueueSampler mxbean = new QueueSampler(queue);<a name="wp1055047"> </a> 
        <a name="wp1055048"> </a> 
        mbs.registerMBean(mxbean, name);<a name="wp1055049"> </a> 
        <a name="wp1055050"> </a> 
        System.out.println(&quot;Waiting...&quot;);<a name="wp1055051"> </a> 
        Thread.sleep(Long.MAX_VALUE);<a name="wp1055052"> </a> 
    }<a name="wp1055053"> </a> 
}<a name="wp1055054"> </a> 
<a name="wp1054896"> </a> 
</pre></div>
<a name="wp1054007"> </a> <p class="pBody">
<code class="cCode">Main</code> 클래스는, 플랫폼 MBean 서버를 취득해, MXBean <code class="cCode">QueueSampler</code> 의 객체명을 작성해,<code class="cCode">QueueSampler</code> MXBean 의 <code class="cCode">Queue</code> 인스턴스를 작성해 처리합니다. 다음에, 이 Queue 인스턴스를, 신규 작성된 <code class="cCode">QueueSampler</code> MXBean 에 보냅니다. 이것으로 표준 MBean 와 완전히 똑같이, MXBean 가 MBean 서버에 등록됩니다.
</p>
<a name="wp1055076"> </a> <h3 class="pHeading2">
2.3. 5	MXBean 의 예제의 실행
</h3>
<a name="wp1055136"> </a> <p class="pBody">
예제를 실행하려면 , 다음의 순서에 따르는지,<code class="cCode">README</code> 파일을 참조합니다.
</p>
<div class="pStep1">
<ol class="pStep1"><a name="wp1055137"> </a> <li><em class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/MXBean</code> 를 아직 열려 있지 않은 경우는 엽니다. </li>
<a name="wp1055138"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">cd </span><em class="cEmphasis">work_dir</em><span class="cUserType">/jmx_examples/MXBean</span>
</p>
<a name="wp1055139"> </a> <li>Java 클래스의 예를 컴파일 합니다. </li>
<a name="wp1055140"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">javac com/example/mxbeans/*.java</span>
</p>
<a name="wp1055141"> </a> <li><code class="cCode">Main</code> 어플리케이션을 기동합니다. </li>
<a name="wp1055142"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">java com.example.mxbeans.Main</span>
</p>
<a name="wp1055143"> </a> <p class="pBody">
이벤트의 발생을 대기중의 <code class="cCode">Main</code> 에 관한 확인이 표시됩니다.
</p>
<a name="wp1055144"> </a> <li>같은 머신의 다른 단말 윈도우로, JConsole 를 기동합니다. </li>
<a name="wp1055145"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">jconsole</span>
</p>
<a name="wp1055146"> </a> <p class="pBody">
JConsole 툴이 열려, 접속 가능한 가동중의 JMX 에이전트의 리스트가 표시됩니다.
</p>
<a name="wp1055147"> </a> <li>「New Connection」윈도우의 리스트로부터 <code class="cCode">com.example.mxbeans.Main</code> 를 선택해, 「Connect」를 클릭합니다. </li>
<a name="wp1055148"> </a> <p class="pBody">
플랫폼의 현재의 액티버티의 개요가 표시됩니다.
</p>
<a name="wp1055163"> </a> <li>「MBean」탭을 클릭합니다. </li>
<a name="wp1055164"> </a> <p class="pBody">
이 패널에, 현재 MBean 서버에 등록되어 모든 MBean 가 표시됩니다.
</p>
<a name="wp1055168"> </a> <li>왼쪽 프레임에 있는 MBean 트리의 <code class="cCode">com.example.mxbeans</code> 노드를 전개합니다. </li>
<a name="wp1055170"> </a> <p class="pBody">
Main 로 작성되어 등록된 MBean <code class="cCode">QueueSampler</code> 의 예가 표시됩니다. <code class="cCode">QueueSampler</code> 를 클릭하면(자), 관련하는 Attributes 및 Operations 노드가 MBean 트리에 표시됩니다.
</p>
<a name="wp1055178"> </a> <li><code class="cCode">Attributes</code> 노드를 선택합니다. </li>
<a name="wp1055180"> </a> <p class="pBody">
오른쪽 페인에 <code class="cCode">QueueSample</code> 속성과 그 <code class="cCode">javax.management.openmbean.CompositeDataSupport</code> 의 값이 표시됩니다.
</p>
<a name="wp1055191"> </a> <li><code class="cCode">CompositeDataSupport</code> 치를 더블 클릭 합니다. </li>
<a name="wp1055192"> </a> <p class="pBody">
MXBean 시스템가 <code class="cCode">QueueSample</code> 인스턴스를 <code class="cCode">CompositeData</code> 로 변환했기 때문에,<code class="cCode">QueueSample</code> 의 값인 <code class="cCode">date</code>,<code class="cCode">head</code>, 및 <code class="cCode">size</code> 가 표시됩니다. <code class="cCode">QueueSampler</code> 를 MXBean 는 아니고 표준 MBean 로서 정의했을 경우,<code class="cCode">QueueSample</code> 클래스는 그 클래스 패스에는 존재하지 않기 때문에 JConsole 로부터는 발견되지 않습니다. <code class="cCode">QueueSampler</code> 가 표준 MBean 의 경우,<code class="cCode">QueueSample</code> 속성치를 추출하면(자) <code class="cCode">ClassNotFoundException</code> 가 돌려주어집니다. 이와 같이, JConsole 와 같이 범용적인 JMX 클라이언트로 JMX 에이전트에 접속할 경우에 MXBean 를 사용하면(자) 편리합니다.
</p>
<a name="wp1055214"> </a> <li><code class="cCode">Operations</code> 노드를 선택합니다. </li>
<a name="wp1055610"> </a> <p class="pBody">
<code class="cCode">clearQueue</code> 조작을 호출하는 버튼이 표시됩니다.
</p>
<a name="wp1055221"> </a> <li>「<code class="cCode">clearQueue</code>」버튼을 클릭합니다.  </li>
<a name="wp1055222"> </a> <p class="pBody">
메소드의 호출에 성공했던 것이 통지됩니다.
</p>
<a name="wp1055223"> </a> <li><code class="cCode">Attributes</code> 노드를 이제(벌써) 1 번 선택해,<code class="cCode">CompositeDataSupport</code> 치를 더블 클릭 합니다.  </li>
<a name="wp1055536"> </a> <p class="pBody">
이것으로 큐가 리셋 됩니다.
</p>
<a name="wp1055537"> </a> <li>「Connection」를 클릭해, 다음에 「Exit」를 클릭해, JConsole 를 종료합니다. </li>
</ol>
</div>
<a name="wp1055613"> </a> <p class="pBody">
이 예에서는, JConsole 가 JMX 클라이언트로서 사용되었습니다만, JMX 클라이언트의 자작 프로그램으로부터 MXBean 에 액세스 하는 경우는 다음의 2 개의 방법의 어느 쪽인지로 실시합니다.
</p>
<ul class="pBullet1"><a name="wp1055626"> </a> <div class="pBullet1"><li>일반적으로는 다음의 코드를 사용한다.  </li></div>
<a name="wp1055637"> </a> <div class="pCodeCaption">
코드예&#160;2-9	MXBean 에 직접 액세스 한다
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1055638"> </a> 
MBeanServer mbs = <em class="cEmphasis">...whatever...</em>;<a name="wp1055658"> </a> 
ObjectName name = new ObjectName(&quot;com.example.mxbeans:type=QueueSampler&quot;);<a name="wp1055643"> </a> 
CompositeData queueSample = (CompositeData) mbs.getAttribute(name, <a name="wp1055644"> </a> 
                             &quot;QueueSample&quot;);<a name="wp1055645"> </a> 
int size = (Integer) queueSample.get(&quot;size&quot;);<a name="wp1055646"> </a> 
</pre></div>
<a name="wp1055647"> </a> <div class="pBullet1Last"><li>프록시 경유. 다음의 코드를 사용한다. </li></div>
</ul>
<blockquote><a name="wp1055648"> </a> <div class="pCodeCaption">
코드예&#160;2-10	프록시 경유로 MXBean 에 액세스 한다
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1055649"> </a> 
MBeanServer mbs = <em class="cEmphasis">...whatever...</em>;<a name="wp1055657"> </a> 
ObjectName name = new ObjectName(&quot;com.example.mxbeans:type=QueueSampler&quot;);<a name="wp1055651"> </a> 
QueueSamplerMXBean proxy = JMX.newMXBeanProxy(mbs, name, <a name="wp1055652"> </a> 
                                              QueueSamplerMXBean.class);<a name="wp1055653"> </a> 
QueueSample queueSample = proxy.getQueueSample();<a name="wp1055654"> </a> 
int size = queueSample.getSize();<a name="wp1055655"> </a> 
</pre></div>
<a name="wp1055656"> </a> <p class="pBody">
<a  href="essential.html#wp1055648">코드예&#160;2-10</a>  에서는, newMXBeanProxy 메소드를 사용해 MXBean 프록시를 작성합니다. <code class="cCode">newMBeanProxy</code> 라고 하는 등가의 메소드가 있는 것은, 다른 형태의 MBean 로 사용하는 프록시를 작성하기 (위해)때문에입니다. <code class="cCode">newMBeanProxy</code> 및 <code class="cCode">newMXBeanProxy</code> 메소드의 사용법은 완전히 같습니다.
</p></blockquote>
<a name="wp1055639"> </a> <h2 class="pHeading1">
2.4	MBean 기술자
</h2>
<a name="wp1055240"> </a> <p class="pBody">
기술자에 의해, MBean 에 관한 추가 정보를 관리 클라이언트에 제공할 수 있습니다. 예를 들어, MBean 속성에 관한 기술자로 계측 단위나 최대치로 최소치를 나타내는 경우도 있습니다. Java SE 6 의 시점에서, 기술자는 JMX API 에 포함되어 있어 어느 MBean 에서도 사용 가능합니다.  
</p>
<a name="wp1055251"> </a> <p class="pBody">
기술자는, 임의의 메타데이타를 MBean 에 추가하는 경우에 편리합니다. 기술자는 JMX API 에 반드시 있습니다만, Java SE 6 까지는 Model MBean 와 따로 사용할 수 없습니다.  
</p>
<a name="wp1055253"> </a> <p class="pBody">
<code class="cCode">MBean*Info</code> 클래스 (<code class="cCode">MBeanInfo</code>,<code class="cCode">MBeanAttributeInfo</code> 등)의 대부분의 생성자 의 경우, 각각 공통되는 파라미터와 추가 파라미터 <code class="cCode">javax.management.Descriptor</code> 를 가지는 병렬 생성자 이 존재합니다. <code class="cCode">OpenMBean*InfoSupport</code> 의 경우도 같습니다. <code class="cCode">MBean*Info</code> 및 <code class="cCode">OpenMBean*InfoSupport</code> 클래스에는,<code class="cCode">getDescriptor()</code> 메소드가 포함되어 있습니다.
</p>
<a name="wp1055255"> </a> <p class="pBody">
Open MBean 는,<code class="cCode">OpenMBeanParameterInfo</code> 및 <code class="cCode">OpenMBeanAttributeInfo</code> 의 메소드 <code class="cCode">getDefaultValue()</code>,<code class="cCode">getLegalValues()</code>,<code class="cCode">getMaxValue()</code>,<code class="cCode">getMinValue()</code> 로부터, 디폴트에 관한 정보와 유효한 값을 돌려줍니다. 이 정보는, 대응하는 기술자에게도 존재합니다. 또, 다른 MBean 에서도, 각각의 기술자에게 있는 정보를 돌려줄 수가 있습니다.
</p>
<a name="wp1055312"> </a> <p class="pBody">
<code class="cCode">jmx_examples.zip</code> 파일을 다운로드해 해동하면(자), MBean 기술자를 설명한 샘플 프로그램이 <em style="font-style: oblique" class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Descriptors/com/example/mxbeans </code> 디렉토리에 작성됩니다. MBean 기술자의 샘플에는, 다음의 파일이 포함되어 있습니다.
</p>
<ul class="pBullet1"><a name="wp1055336"> </a> <div class="pBullet1"><li><code class="cCode">Author</code>. MBean 인터페이스의 저자명을 나타내는 주석. </li></div>
<a name="wp1055337"> </a> <div class="pBullet1Plus"><li><code class="cCode">DisplayName</code>. MBean 인터페이스의 메소드의 표시명을 나타내는 주석. </li></div>
<a name="wp1055338"> </a> <div class="pBullet1Plus"><li><code class="cCode">Main</code>. 샘플을 설정해 실행하는 프로그램. </li></div>
<a name="wp1055331"> </a> <div class="pBullet1Plus"><li><code class="cCode">QueueSamplerMXBean</code> 인터페이스. </li></div>
<a name="wp1055314"> </a> <div class="pBullet1Plus"><li><code class="cCode">QueueSampler</code> 클래스. MXBean 인터페이스를 구현한다. </li></div>
<a name="wp1055315"> </a> <div class="pBullet1Plus"><li><code class="cCode">QueueSample</code> Java 의 형태. MXBean 인터페이스내의 <code class="cCode">getQueueSample()</code> 메소드에 의해 반환된다. </li></div>
<a name="wp1055339"> </a> <div class="pBullet1Last"><li><code class="cCode">Version</code>. MBean 인터페이스의 현재의 버젼을 나타내는 주석. </li></div>
</ul>
<a name="wp1055418"> </a> <p class="pBody">
이 예에 나타내는 <code class="cCode">QueueSampler</code> MXBean 는,<a  href="essential.html#wp1054551"><span style="color: #3366CC">제&#160;2 장 「MXBean 의 도입」</span></a> 에 나타낸 MXBean 의 예와 기본적으로 같은 액션을 실행하고 있습니다만, MBean 기술자가 추가되고 있는 점이 다릅니다. 이 예는,<code class="cCode">DescriptorKey</code> 메타 주석을 사용하는 것으로, 표준 MBean (또는 MXBean) 인터페이스내의 주석에 의해 표준 MBean (또는 MXBean)의 기술자에게 새로운 기술자를 추가하는 방법을 나타내고 있습니다.
</p>
<a name="wp1055357"> </a> <h3 class="pHeading2">
2.4. 1	DescriptorKey 주석
</h3>
<a name="wp1055364"> </a> <p class="pBody">
새로운 주석 <code class="cCode">DescriptorKey</code> 를 사용하는 것으로, 표준 MBean (또는 MXBean) 인터페이스내의 주석에 의해 표준 MBean (또는 MXBean)의 기술자에게 정보를 추가할 수 있습니다. 이것에 의해, 툴로 기존의 관리 모델로부터 표준 MBean 를 생성해, 그 모델로부터의 정보를 다른 파일은 아니고 생성된 MBean 인터페이스에 포함할 수가 있습니다.
</p>
<a name="wp1055358"> </a> <p class="pBody">
<a  href="essential.html#wp1055378">코드예&#160;2-11</a>  는,<code class="cCode">Author</code> 주석의 정의를 나타내고 있습니다.
</p>
<a name="wp1055378"> </a> <div class="pCodeCaption">
코드예&#160;2-11	Author 주석
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1055263"> </a> 
package com.example.mxbeans;<a name="wp1055394"> </a> 
<a name="wp1055395"> </a> 
import java.lang.annotation.Documented;<a name="wp1055396"> </a> 
import java.lang.annotation.ElementType;<a name="wp1055397"> </a> 
import java.lang.annotation.Retention;<a name="wp1055398"> </a> 
import java.lang.annotation.RetentionPolicy;<a name="wp1055399"> </a> 
import java.lang.annotation.Target;<a name="wp1055400"> </a> 
import javax.management.DescriptorKey;<a name="wp1055401"> </a> 
<a name="wp1055402"> </a> 
@Documented<a name="wp1055403"> </a> 
@Target(ElementType.TYPE)<a name="wp1055404"> </a> 
@Retention(RetentionPolicy.RUNTIME)<a name="wp1055405"> </a> 
public @interface Author {<a name="wp1055406"> </a> 
    @DescriptorKey(&quot;author&quot;)<a name="wp1055407"> </a> 
    String value();<a name="wp1055408"> </a> 
}<a name="wp1055392"> </a> 
</pre></div>
<a name="wp1055412"> </a> <p class="pBody">
이 주석은, MBean 인터페이스의 작성자의 이름을 제공합니다. 새로운 필드 <code class="cCode">author</code> 는,<code class="cCode">@Author</code> 주석에 의해 정의된 값을 가지는 <code class="cCode">MBeanInfo</code> 기술자에게 추가됩니다. 파일 <code class="cCode">Version</code> 및 <code class="cCode">DisplayName</code> 는, 이러한 이름의 주석을, 전술의 <code class="cCode">Author</code> 의 경우와 완전히와 같이  정의합니다. <code class="cCode">Version</code> 및 <code class="cCode">DisplayName</code> 의 <code class="cCode">@DescriptorKey</code> 치는, 각각<code class="cCode">「version」</code>와<code class="cCode">「displayname」</code>입니다.
</p>
<a name="wp1055473"> </a> <p class="pBody">
Version 의 경우, 새로운 필드 <code class="cCode">version</code> 는 <code class="cCode">@Version</code> 주석에 의해 정의된 값을 가지는 <code class="cCode">MBeanInfo</code> 기술자에게 추가됩니다.
</p>
<a name="wp1055475"> </a> <p class="pBody">
<code class="cCode">DisplayName</code> 의 경우, 새로운 필드 <code class="cCode">displayName</code> 는, 주석을 붙일 수 있었던 메소드가 취득 메소드/설정 메소드와 조작의 어디에서 있을까에 응해, 각각 <code class="cCode">@DisplayName</code> 주석에 의해 정의된 값을 가지는 <code class="cCode">MBeanAttributeInfo</code> 기술자 또는 <code class="cCode">MBeanOperationInfo</code> 기술자에게 추가됩니다.
</p>
<a name="wp1055451"> </a> <h3 class="pHeading2">
2.4. 2	MBean 기술자의 사용
</h3>
<a name="wp1055416"> </a> <p class="pBody">
다음의 예로 사용되고 있는 <code class="cCode">QueueSamplerMXBean</code> 인터페이스는, MBean 기술자를 구현해 그 정보의 일부를 공개하는 범위에 한정해, MXBean 의 예로 사용되고 있는 인터페이스와는 조금 다릅니다.
</p>
<a name="wp1055455"> </a> <div class="pCodeCaption">
코드예&#160;2-12	기술자를 사용한 QueueSamplerMXBean
</div>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1055460"> </a> 
package com.example.mxbeans;<a name="wp1055471"> </a> 
<a name="wp1055462"> </a> 
@Author(&quot;Mr Bean&quot;)<a name="wp1055463"> </a> 
@Version(&quot;1. 0&quot;)<a name="wp1055464"> </a> 
public interface QueueSamplerMXBean {<a name="wp1055465"> </a> 
    @DisplayName(&quot;GETTER: QueueSample&quot;)<a name="wp1055466"> </a> 
    public QueueSample getQueueSample();<a name="wp1055467"> </a> 
    @DisplayName(&quot;OPERATION: clearQueue&quot;)<a name="wp1055468"> </a> 
    public void clearQueue();<a name="wp1055469"> </a> 
}<a name="wp1055470"> </a> 
<a name="wp1055472"> </a> 
</pre></div>
<a name="wp1055483"> </a> <p class="pBody">
이것으로 <code class="cCode">@Author</code> 주석은 <code class="cCode">Mr.  Bean</code>, <code class="cCode">@Version</code> 주석은 <code class="cCode">1.0</code>, <code class="cCode">@DisplayName</code> 는 속성 <code class="cCode">QueueSample</code> 와 조작 <code class="cCode">clearQueue</code> 의 어느 쪽인가의 이름으로 설정됩니다.
</p>
<a name="wp1055487"> </a> <h3 class="pHeading2">
2.4. 3	MBean 기술자의 예제의 실행
</h3>
<a name="wp1055489"> </a> <p class="pBody">
예제를 실행하려면 , 다음의 순서에 따르는지,<code class="cCode">README</code> 파일을 참조합니다.
</p>
<div class="pStep1">
<ol class="pStep1"><a name="wp1055518"> </a> <li><em class="cEmphasis">work_dir</em><code class="cCode">/jmx_examples/Descriptors</code> 를 아직 열려 있지 않은 경우는 엽니다. </li>
<a name="wp1055519"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">cd </span><em class="cEmphasis">work_dir</em><span class="cUserType">/jmx_examples/Descriptors</span>
</p>
<a name="wp1055492"> </a> <li>Java 클래스의 예를 컴파일 합니다. </li>
<a name="wp1055493"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">javac com/example/mxbeans/*.java</span>
</p>
<a name="wp1055494"> </a> <li><code class="cCode">Main</code> 어플리케이션을 기동합니다. </li>
<a name="wp1055495"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">java com.example.mxbeans.Main</span>
</p>
<a name="wp1055496"> </a> <p class="pBody">
이벤트의 발생을 대기중의 <code class="cCode">Main</code> 에 관한 확인이 표시됩니다.
</p>
<a name="wp1055497"> </a> <li>같은 머신의 다른 단말 윈도우로, JConsole 를 기동합니다. </li>
<a name="wp1055498"> </a> <p class="pBody">
<code class="cCode">$ </code><span class="cUserType">jconsole</span>
</p>
<a name="wp1055499"> </a> <p class="pBody">
JConsole 툴이 열려, 접속 가능한 가동중의 JMX 에이전트의 리스트가 표시됩니다.
</p>
<a name="wp1055500"> </a> <li>「New Connection」윈도우의 리스트로부터 <code class="cCode">com.example.mxbeans.Main</code> 를 선택해, 「Connect」를 클릭합니다. </li>
<a name="wp1055501"> </a> <p class="pBody">
플랫폼의 현재의 액티버티의 개요가 표시됩니다.
</p>
<a name="wp1055502"> </a> <li>「MBean」탭을 클릭합니다. </li>
<a name="wp1055503"> </a> <p class="pBody">
이 패널에, 현재 MBean 서버에 등록되어 모든 MBean 가 표시됩니다.
</p>
<a name="wp1055504"> </a> <li>왼쪽 프레임에 있는 MBean 트리의 <code class="cCode">com.example.mxbeans</code> 노드를 전개합니다. </li>
<a name="wp1055484"> </a> <p class="pBody">
Main 로 작성되어 등록된 MBean <code class="cCode">QueueSampler</code> 의 예가 표시됩니다. <code class="cCode">QueueSampler</code> 를 클릭하면(자), 관련하는 Attributes 및 Operations 노드가 MBean 트리에 표시됩니다. 또,<code class="cCode">MBeanInfo</code> 기술자표에는 <code class="cCode">author</code> 및 <code class="cCode">version</code> 필드도 표시됩니다.
</p>
<a name="wp1055530"> </a> <li><code class="cCode">QueueSampler</code> MBean 노드아래에 있는 <code class="cCode">Attributes</code> 및 <code class="cCode">Operations</code> 노드를 전개합니다. </li>
<a name="wp1055683"> </a> <p class="pBody">
Attributes 와 Operations 가 개별적으로 표시됩니다.
</p>
<a name="wp1055532"> </a> <li><code class="cCode">QueueSample</code> 노드를 선택합니다. </li>
<a name="wp1055542"> </a> <p class="pBody">
<code class="cCode">MBeanAttributeInfo</code> 기술자표에 <code class="cCode">displayName</code> 필드가 표시됩니다.
</p>
<a name="wp1055548"> </a> <li><code class="cCode">clearQueue</code> 노드를 선택합니다. </li>
<a name="wp1055551"> </a> <p class="pBody">
<code class="cCode">MBeanOperationInfo</code> 기술자표에 <code class="cCode">displayName</code> 필드가 표시됩니다.
</p>
<a name="wp1055554"> </a> <li>「Connection」를 클릭해, 다음에 「Exit」를 클릭해, JConsole 를 종료합니다. </li>
</ol>
</div>
<a name="wp1055075"> </a> <p class="pBody">

</p>
<a name="wp1001464"> </a> <p class="pBodySmall">

</p>
<a name="wp1001467"> </a> <p class="pBodySmall">

</p>

    <p>&#160;</p>
    <hr class="pHr" />
    <table width="100%" summary="layout">
      <tr><td align="left">
<a accesskey="c" href="tutorialTOC.html">목차</a>  | <a accesskey="p" href="intro.html">전의 항목</a>  | <a accesskey="n" href="connectors.html">다음의 항목</a> 
       </td>
        <td align="right">
<span class="copyright">Java Management Extensions (JMX) 테크놀러지의 튜토리얼<br /> Java Management Extensions (JMX), Java Platform, Standard Edition 6</span>
        </td>
      </tr>
    </table>

    <p>&#160;</p>
<p class="copyright"><a         href="../../../../legal/SMICopyright.html">Copyright</a>  &#169; 2006 Sun Microsystems, Inc.  All rights reserved. </p>
  </body>
</html>

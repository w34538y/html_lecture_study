<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.2.1128" />
<meta name="TEMPLATEBASE" content="book-no-index" />
<meta name="LASTUPDATED" content="2002 연 11 월 12 일 화요일 11:53:36 오전" />
<title>JNI 의 형태와 데이터 구조 - xrath.com 에서 번역됨</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
    <link rel="Table of Contents" href="jniTOC.html" />
    <link rel="Previous" href="design.html" />
    <link rel="Next" href="functions.html" />
    <link rel="Index" href="backcover.html" />
  </head>

  <body>
<a href="#skip" title="네비게이션 링크를 스킵"></a> 
    <table width="100%" summary="layout">
      <tr><td align="left">
<a accesskey="c" href="jniTOC.html">목차</a>  | <a accesskey="p" href="design.html">전의 항목</a>  | <a accesskey="n" href="functions.html">다음의 항목</a> 
       </td>
<td align="right"><i>Java Native Interface 스펙</i></td>
      </tr>
    </table>
<hr size="8" width="35%" align="left" noshade>
<a name="skip"></a>  <a name="wp9502"> </a> <h2 class="pNewHTMLPage">
JNI 의 형태와 데이터 구조
</h2>
<hr class="pHr"/>
<a name="wp15773"> </a> <h2 class="pChapNum">
제 3 장
</h2>
<a name="wp15901"> </a> <p class="pBody">
이 장에서는, JNI 가 어떻게 Java 의 형태를 네이티브 C 의 형태에 매핑 하는지를 해설합니다.  
</p>
<a name="wp428"> </a> <h2 class="pHeading1">
원시형
</h2>
<a name="wp16207"> </a> <p class="pBody">
<a  href="types.html#wp198">겉(표) 3-1</a>  는, Java 의 원시형 및 그러한 머신 의존의 네이티브형과의 대응에 대해 설명하고 있습니다.
</p>
<a name="wp522"> </a> <p class="pBody">
</p><div align="left">
<table border="0" cellpadding="7" summary="Primitive Types and Native Equivalents" id="wp198">
  <caption><a name="wp198"> </a> <div class="pTableCaption">
겉(표)&#160;3-1  원시형과 네이티브형
</div>
</caption>
<thead>
<tr  align="center">    <th><a name="wp16285"> </a> <div style="text-align: left" class="pTableHead">
Java 의 데이터형
</div>

</th>
    <th><a name="wp16287"> </a> <div style="text-align: left" class="pTableHead">
네이티브형
</div>

</th>
    <th><a name="wp16289"> </a> <div style="text-align: left" class="pTableHead">
설명
</div>

</th>
</tr>
</thead>
  <tr align="left">    <td align="left" valign="top"><a name="wp16291"> </a> <div class="pTableText">
boolean
</div>
</td>
    <td align="left" valign="top"><a name="wp16293"> </a> <div class="pTableText">
jboolean
</div>
</td>
    <td align="left" valign="top"><a name="wp16295"> </a> <div class="pTableText">
unsigned 8 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16297"> </a> <div class="pTableText">
byte
</div>
</td>
    <td align="left" valign="top"><a name="wp16299"> </a> <div class="pTableText">
jbyte
</div>
</td>
    <td align="left" valign="top"><a name="wp16301"> </a> <div class="pTableText">
signed 8 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16303"> </a> <div class="pTableText">
char
</div>
</td>
    <td align="left" valign="top"><a name="wp16305"> </a> <div class="pTableText">
jchar
</div>
</td>
    <td align="left" valign="top"><a name="wp16307"> </a> <div class="pTableText">
unsigned 16 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16309"> </a> <div class="pTableText">
short
</div>
</td>
    <td align="left" valign="top"><a name="wp16311"> </a> <div class="pTableText">
jshort
</div>
</td>
    <td align="left" valign="top"><a name="wp16313"> </a> <div class="pTableText">
signed 16 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16315"> </a> <div class="pTableText">
int
</div>
</td>
    <td align="left" valign="top"><a name="wp16317"> </a> <div class="pTableText">
jint
</div>
</td>
    <td align="left" valign="top"><a name="wp16319"> </a> <div class="pTableText">
signed 32 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16321"> </a> <div class="pTableText">
long
</div>
</td>
    <td align="left" valign="top"><a name="wp16323"> </a> <div class="pTableText">
jlong
</div>
</td>
    <td align="left" valign="top"><a name="wp16325"> </a> <div class="pTableText">
signed 64 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16327"> </a> <div class="pTableText">
float
</div>
</td>
    <td align="left" valign="top"><a name="wp16329"> </a> <div class="pTableText">
jfloat
</div>
</td>
    <td align="left" valign="top"><a name="wp16331"> </a> <div class="pTableText">
32 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16344"> </a> <div class="pTableText">
double
</div>
</td>
    <td align="left" valign="top"><a name="wp16346"> </a> <div class="pTableText">
jdouble
</div>
</td>
    <td align="left" valign="top"><a name="wp16348"> </a> <div class="pTableText">
64 비트
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16333"> </a> <div class="pTableText">
void
</div>
</td>
    <td align="left" valign="top"><a name="wp16335"> </a> <div class="pTableText">
void
</div>
</td>
    <td align="left" valign="top"><a name="wp16337"> </a> <div class="pTableText">
없음
</div>
</td>
</tr>
</table>
</div>
<p class="pBody">

</p>
<a name="wp15927"> </a> <p class="pBody">
다음의 정의는, 편리성이기 때문에 제공되고 있습니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
#define JNI_FALSE  0<a name="wp525"> </a> 
#define JNI_TRUE   1<a name="wp526"> </a> 
</pre></div>
<a name="wp16071"> </a> <p class="pBody">
<code class="cCode">jsize</code> 정수형은, 기본적인 첨자 및 사이즈를 기술하기 위해서 사용됩니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
typedef jint jsize;<a name="wp534"> </a> 
</pre></div>
<a name="wp15954"> </a> <h2 class="pHeading1">
참조형
</h2>
<a name="wp970"> </a> <p class="pBody">
JNI 에는, 각종의 Java 객체에 대응하는 많은 참조형이 포함되어 있습니다. JNI 참조형은,<a  href="types.html#wp914">그림 3-1</a>  에 나타내도록(듯이), 계층 구조가 되어 있습니다.
</p>
<a name="wp912"> </a> <p class="pBody">
</p><div align="center"><img src="images/types4.gif" height="226" width="662" alt="계층의 최상부는 jobject 입니다. jobject  의 서브 클래스는,jclass,jstring,jarray, 및 jthrowable 입니다. jarray 의 서브 클래스는,jobjectArray,jbooleanArray,jbyteArray,jcharArray,jshortArray,jintArray,jlongArray,jfloatArray,jdoubleArray 입니다. " border="0" hspace="0" vspace="0"/></div><p class="pBody">
</p>
<a name="wp914"> </a> <div class="pFigureCaption">
그림&#160;3-1    참조형의 계층 <br /><br />
</div><a name="wp663"> </a> <p class="pBody">
C 에서는, 그 외 모든 JNI 참조형은, jobject 와 같이 정의되고 있습니다. 예를 나타냅니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
typedef jobject jclass;<a name="wp1032"> </a> 
</pre></div>
<a name="wp1033"> </a> <p class="pBody">
C++ 에서는, JNI 는 더미 클래스세트를 도입해, subtype 관계를 강제합니다. 예를 나타냅니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
class _jobject {};<a name="wp1041"> </a> 
class _jclass : public _jobject {};<a name="wp1055"> </a> 
...<a name="wp1057"> </a> 
typedef _jobject *jobject;<a name="wp1058"> </a> 
typedef _jclass *jclass;<a name="wp1063"> </a> 
</pre></div>
<a name="wp1064"> </a> <h2 class="pHeading1">
필드와 메소드 ID
</h2>
<a name="wp1065"> </a> <p class="pBody">
필드와 메소드 ID 는, 다음과 같이 정규의 C 포인터형입니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
struct _jfieldID;              /* opaque structure */<a name="wp1067"> </a> 
typedef struct _jfieldID *jfieldID;   /* field IDs */<a name="wp1068"> </a> 
<a name="wp1069"> </a> 
struct _jmethodID;              /* opaque structure */<a name="wp1070"> </a> 
typedef struct _jmethodID *jmethodID; /* method IDs */<a name="wp574"> </a> 
</pre></div>
<a name="wp568"> </a> <h2 class="pHeading1">
값의 형태 
</h2>
<a name="wp16107"> </a> <p class="pBody">
<code class="cCode">jvalue</code> 공용 체형은, 인수 배열로 요소형으로서 사용됩니다. 이것은 다음과 같이 선언됩니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
typedef union jvalue {<a name="wp582"> </a> 
    jboolean z;<a name="wp583"> </a> 
    jbyte    b;<a name="wp584"> </a> 
    jchar    c;<a name="wp585"> </a> 
    jshort   s;<a name="wp586"> </a> 
    jint     i;<a name="wp587"> </a> 
    jlong    j;<a name="wp588"> </a> 
    jfloat   f;<a name="wp589"> </a> 
    jdouble  d;<a name="wp590"> </a> 
    jobject  l;<a name="wp591"> </a> 
} jvalue;<a name="wp592"> </a> 
</pre></div>
<a name="wp16432"> </a> <h2 class="pHeading1">
형태의 시그니챠
</h2>
<a name="wp16437"> </a> <p class="pBody">
JNI 는, Java VM 의 형태의 시그니챠 표현을 사용합니다. <a  href="types.html#wp276">겉(표)&#160;3-2</a>  는, 이러한 형태의 시그니챠를 나타내고 있습니다.
</p>
<a name="wp597"> </a> <p class="pBody">
</p><div align="left">
<table border="0" cellpadding="7" summary="Java VM Type Signatures" id="wp276">
  <caption><a name="wp276"> </a> <div class="pTableCaption">
겉(표)&#160;3-2  Java VM 의 형태의 시그니챠
</div>
</caption>
<thead>
<tr  align="center">    <th><a name="wp16445"> </a> <div style="text-align: left" class="pTableHead">
Type Signature
</div>

</th>
    <th><a name="wp16447"> </a> <div style="text-align: left" class="pTableHead">
Java 의 데이터형
</div>

</th>
</tr>
</thead>
  <tr align="left">    <td align="left" valign="top"><a name="wp16449"> </a> <div class="pTableText">
Z
</div>
</td>
    <td align="left" valign="top"><a name="wp16451"> </a> <div class="pTableText">
boolean
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16453"> </a> <div class="pTableText">
B
</div>
</td>
    <td align="left" valign="top"><a name="wp16455"> </a> <div class="pTableText">
byte
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16457"> </a> <div class="pTableText">
C
</div>
</td>
    <td align="left" valign="top"><a name="wp16459"> </a> <div class="pTableText">
char
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16461"> </a> <div class="pTableText">
S
</div>
</td>
    <td align="left" valign="top"><a name="wp16463"> </a> <div class="pTableText">
short
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16465"> </a> <div class="pTableText">
I
</div>
</td>
    <td align="left" valign="top"><a name="wp16467"> </a> <div class="pTableText">
int
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16469"> </a> <div class="pTableText">
J
</div>
</td>
    <td align="left" valign="top"><a name="wp16471"> </a> <div class="pTableText">
long
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16473"> </a> <div class="pTableText">
F
</div>
</td>
    <td align="left" valign="top"><a name="wp16475"> </a> <div class="pTableText">
float
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16477"> </a> <div class="pTableText">
D
</div>
</td>
    <td align="left" valign="top"><a name="wp16479"> </a> <div class="pTableText">
double
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16520"> </a> <div class="pTableText">
L fully-qualified-class ;
</div>
</td>
    <td align="left" valign="top"><a name="wp16522"> </a> <div class="pTableText">
완전 지정의 클래스
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16528"> </a> <div class="pTableText">
[ type
</div>
</td>
    <td align="left" valign="top"><a name="wp16530"> </a> <div class="pTableText">
type[]
</div>
</td>
</tr>
  <tr align="left">    <td align="left" valign="top"><a name="wp16534"> </a> <div class="pTableText">
( arg-types ) ret-type
</div>
</td>
    <td align="left" valign="top"><a name="wp16536"> </a> <div class="pTableText">
메소드의 형태
</div>
</td>
</tr>
</table>
</div>
<p class="pBody">

</p>
<a name="wp16537"> </a> <p class="pBody">
예를 들어, 다음의 Java 메소드에는,
</p>
<div class="pPreformatted"><pre class="pPreformatted">
long f (int n, String s, int[] arr);<a name="wp600"> </a> 
</pre></div>
<a name="wp16540"> </a> <p class="pBody">
다음과 같은 형태의 시그니챠가 있습니다.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
(ILjava/lang/String;[I) J<a name="wp607"> </a> 
</pre></div>
<a name="wp16542"> </a> <h2 class="pHeading1">
변경 후의 UTF-8 캐릭터 라인
</h2>
<a name="wp477"> </a> <p class="pBody">
JNI 는 변경 후의 UTF-8 캐릭터 라인을 사용해 각종의 캐릭터 라인형을 표현합니다. 변경 후의 UTF-8 캐릭터 라인은 Java VM 에 의해 사용되는 것 것과 같습니다. 변경 후의 UTF-8 캐릭터 라인은, 1 문자에 대해 1 바이트만을 사용해 null 이외의 ASCII 문자만이 포함되는 문자 순서를 표현할 수 있도록(듯이) 코드화 되고 있습니다만, Unicode 문자도 모두 표현할 수 있습니다. </p>
<p> 다음과 같이, \u0001? \u007F 의 모든 문자가 1 바이트로 표현됩니다.
</p>

<!-- Begin material on modified UTF-8 from JVM spec -->
   <p><table BORDER=1 CELLSPACING=0 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>0</center>
         </td><td COLSPAN=7>
<p><center>bits 6-0</center>
         </td></tr>
   </table><p></p>

<p>바이트중 7 비트의 데이터는, 표현되고 있는 문자의 값을 나타냅니다. </p>

<p>null 문자 (<code>「\u000」</code>) 및 <code>「\u0080」? 「\u07FF」</code> 의 모든 문자는, 다음과 같이 x 와 y 의 한 벌의 바이트로 표현됩니다. </p>

<p>x: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">

      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td><td WIDTH="12%">
            <p><center>0</center>

         </td><td COLSPAN=5>
<p><center>bits 10-6</center>
         </td></tr>
</table> y: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>1</center>

         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td COLSPAN=6>
<p><center>bits 5-0</center>
         </td></tr>
   </table><p></p>

<p>이 바이트는, ((x &amp;

<code>0x1f</code>) &lt;&lt; <code>6</code>) + (y &amp; <code>0x3f</code>)의 값으로 문자를 표현합니다. </p>

<p><code>「\u0800」</code>? <code>「\uFFFF」</code> 의 문자는, 다음과 같이 x, y 및 z 의 3 바이트로 표현됩니다. </p>


<p>x: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td><td WIDTH="12%">

            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td COLSPAN=4>
<p><center>bits 15-12</center>
         </td></tr>
</table> y: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">

      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td COLSPAN=6>
<p><center>bits 11-6</center>

         </td></tr>
</table> z: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>

         </td><td COLSPAN=6>
<p><center>bits 5-0</center>
         </td></tr>
   </table><p></p>

<p>((x &amp; <code>0xf</code>) &lt;&lt; <code>12</code>) + ((y &amp; <code>0x3f</code>) &lt;&lt;<code>6</code>) + (z &amp; <code>0x3f</code>)라고 하는 값의 문자가 바이트로 표현됩니다.
</p>

<p>U+FFFF 보다 큰 코드 포인트를 가지는 문자 (이른바 「보조 문자」)는, UTF-16 표현의 2살의 대리 코드 단위를 따로 따로 encode 하는 것으로 표현됩니다. 대리 코드 단위는 각각 3 바이트로 표현됩니다. 즉, 보조 문자는,<i>u</i>,<i>v</i>,<i>w</i>,<i>x</i>,<i>y</i>,<i>z</i> 의 6 바이트로 표현됩니다. </p>


<p>u: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td><td WIDTH="12%">

            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>

         </td><td WIDTH="12%">
            <p><center>0</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td></tr>
</table> v: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>

         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">

            <p><center>0</center>
         </td><td COLSPAN=4>
<p><center>(bits 20-16) - 1</center>
         </td></tr>
</table> w: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">

            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td COLSPAN=6>
<p><center>bits 15-10</center>
         </td></tr>
</table> x: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">

      <tr>
         <td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td><td WIDTH="12%">
            <p><center>1</center>

         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td><td WIDTH="12%">

            <p><center>0</center>
         </td><td WIDTH="13%">
            <p><center>1</center>
         </td></tr>
</table> y: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">

            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td WIDTH="12%">
            <p><center>1</center>
         </td><td WIDTH="13%">
            <p><center>1</center>

         </td><td COLSPAN=4>
<p><center>bits 9-6</center>
         </td></tr>
</table> z: <table BORDER=1 CELLSPACING=0 CELLPADDING=2 WIDTH="30%">
      <tr>
         <td WIDTH="12%">
            <p><center>1</center>

         </td><td WIDTH="13%">
            <p><center>0</center>
         </td><td COLSPAN=6>
<p><center>bits 5-0</center>
         </td></tr>
   </table><p></p>

<p>값이 0x10000+((v&amp;0x0f) &lt;&lt;16)+((w&amp;0x3f) &lt;&lt;10)+(y&amp;0x0f) &lt;&lt;6)+(z&amp;0x3f)의 문자는 6 바이트로 표현됩니다. </p>


<p>멀티 바이트 문자의 바이트는,<code>class</code> 파일에 빅 endian순서 (고위 바이트가 앞)에 포함되고 있습니다.
   </p>

<p>이 형식과 표준 UTF-8 형식과는, 2 개의 차이점이 있습니다. 제일은, null 문자 <code>(char) 0</code> 이, 1 바이트 형식이 아니고 2 바이트 형식에서 코드화 되고 있는 것입니다. 이것은, 변경 후의 UTF-8 캐릭터 라인에 null 가 짜넣어지지 않은 것을 의미합니다. 제니는, 표준 UTF-8 의 1 바이트, 2 바이트, 및 3 바이트 형식만이 사용되고 있는 것입니다. Java VM 는, 표준 UTF-8 의 4 바이트 형식을 인식하지 않고, 2 x 3 바이트 형식을 사용합니다. </p>

<p>표준 UTF-8 형식에 관한 자세한 것은, 「<i>The Unicode Standard, Version 4.0</i>」의 「<i>3.9 Unicode Encoding Forms</i>」를 참조해 주세요. </p>

<!--- End material from JVM spec per eng request -->

    <p>&#160;</p>
    <hr class="pHr" />
    <table width="100%" summary="layout">
      <tr><td align="left">
<a accesskey="c" href="jniTOC.html">목차</a>  | <a accesskey="p" href="design.html">전의 항목</a>  | <a accesskey="n" href="functions.html">다음의 항목</a> 
       </td>
        <td align="right">
        </td>
      </tr>
    </table>

    <p>&#160;</p>
<p class="copyright"><a         href="../../../../legal/SMICopyright.html">Copyright</a>  &#169; 2003 Sun Microsystems, Inc.  All rights reserved. </p>
  </body>
</html>
